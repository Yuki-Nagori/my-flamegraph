# 性能分析项目配置
# 每个项目需要配置以下信息：

projects:
  # 实际项目1: liii
  liii:
    path: "~/git/liii/mogan"
    output_dir: "~/git/my-flamegraph/liii"
    build_cmds:
      - "xmake config -vD --yes -m releasedbg"
      - "xmake b stem"
    run_cmd: "xmake run stem"
    process_name: "LiiiSTEM"
    cache_dirs:
      - "~/Library/Caches/LiiiLabs/"
      - "~/Library/Application Support/liiilabs"

  # 实际项目2: mogan
  mogan:
    path: "~/git/mogan"
    output_dir: "~/git/my-flamegraph/mogan"
    build_cmds:
      - "xmake config -vD --yes -m releasedbg --is_community=false"
      - "xmake b stem"
    run_cmd: "xmake run stem"
    process_name: "MoganSTEM"
    cache_dirs:
      - "~/Library/Caches/MoganLab"
      - "~/Library/Application Support/moganlab"

  # 完整示例项目（参考使用，不会被实际执行）
  example:
    # 项目根目录路径（必需）- 使用用户主目录避免权限问题
    path: "~/example/project"

    # 输出目录（火焰图等文件将保存在这里）（必需）
    output_dir: "~/example/output"

    # 构建命令（在项目目录中执行）（必需）
    build_cmds:
      - "./configure"
      - "make"

    # 启动命令（必需）- 程序如何启动以进行性能分析
    run_cmd: "./bin/myapp --verbose"

    # 进程名称（用于识别运行中的进程）（必需）
    process_name: "myapp"
    
    # 需要清理的缓存目录（在构建前清理）（可选）
    cache_dirs:
      - "~/.cache/myapp"
      - "~/Library/Application Support/myapp"

    # 程序启动参数（可选）- 如果已包含在run_cmd中则无需重复
    args: []

    # 环境变量（可选）
    env:
      LD_LIBRARY_PATH: "/usr/local/lib"
      DEBUG: "1"

    # 启动后等待时间（秒，等待程序完全启动）（可选，默认3）
    startup_delay: 5

# 全局配置
global:
  # 默认采样时间（秒）
  default_sample_time: 60

  # 默认CPU采样频率（Hz）
  default_cpu_freq: 99

  # 是否启用内存分析
  enable_memory: true

  # FlameGraph目录
  flamegraph_dir: "~/git/FlameGraph"

  # 是否跳过构建步骤
  skip_build: false

  # 超时设置（秒）
  build_timeout: 300
  profiling_timeout: 600